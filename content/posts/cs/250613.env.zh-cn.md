---
title: "Ubuntu 环境配置备忘录"
date: 2025-06-13T10:00:00+08:00
summary: "Ubuntu & MacOS 环境配置备忘录"
draft: false

categories: ["Computer Science"]
tags: ["环境配置"]

cover: "https://pic.aspi-rin.top/2025/08/10a52f53c378b3a6237fd2a447b12709.jpg"

comments: true
showLicense: true
showRelated: true
---

## 账号

新建有 root 权限的普通账户

```bash
# 用 root 账号操作
adduser <username>
usermod -aG sudo <username>  # 将用户添加到 sudo 组
# 配置免密码 sudo
visudo
# 文件末尾追加
<username> ALL=(ALL) NOPASSWD:ALL
```

## zsh

先装字体

- [MesloLGS NF Regular.ttf](https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Regular.ttf)
- [MesloLGS NF Bold.ttf](https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Bold.ttf)
- [MesloLGS NF Italic.ttf](https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Italic.ttf)
- [MesloLGS NF Bold Italic.ttf](https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Bold%20Italic.ttf)

```bash
# Mac 自带，无需安装
sudo apt install zsh
sudo chsh -s /usr/bin/zsh $USER

# 无需初始化配置，后续在 Powerlevel10k 后配置

# oh-my-zsh，一个 zsh 的配置框架
sh -c "$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"

# Powerlevel10k，一个 oh-my-zsh 的主题
git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k

echo 'source ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k/powerlevel10k.zsh-theme' >>~/.zshrc

# 重启 Shell 进入配置
```

插件

```bash
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions

git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting

# 在 ~/.zshrc 中启用插件
plugins=(git sudo z zsh-autosuggestions zsh-syntax-highlighting)
```

## Vim

安装 nvim

MacOS

```bash
brew install neovim
# vim ~/.zshrc
alias vim="nvim"
```

Ubuntu

```bash
curl -LO https://github.com/neovim/neovim/releases/latest/download/nvim-linux-x86_64.tar.gz
# 树莓派是 Arm
curl -LO https://github.com/neovim/neovim/releases/latest/download/nvim-linux-arm64.tar.gz

sudo rm -rf /opt/nvim
sudo tar -C /opt -xzf nvim-linux-x86_64.tar.gz

# vim ~/.zshrc
export PATH="$PATH:/opt/nvim-linux-x86_64/bin"
alias vim="nvim"

# sudo nvim
sudo ln -s /opt/nvim-linux-x86_64/bin/nvim /usr/local/bin/nvim
```

[LazyVim](https://www.lazyvim.org/installation)

```bash
# required
mv ~/.config/nvim{,.bak}

git clone https://github.com/LazyVim/starter ~/.config/nvim
rm -rf ~/.config/nvim/.git
vim  # 启动后会自动进行一系列下载安装
```

## 其他命令行工具

[bat](https://github.com/sharkdp/bat)：增强版 `cat`

```bash
# macOS
brew install bat
alias cat="bat -pp"

# Linux
sudo apt install bat
alias cat='batcat -pp'
alias bat='batcat'
```

[eza](https://github.com/eza-community/eza)：增强版 `ls`
- exa 的社区维护分支

```bash
# macOS
brew install eza
# Linux
sudo apt install eza

alias ls='eza --color=always --icons'
alias ll='eza -la --color=always --icons --git'
alias la='eza -la --color=always --icons --git'
alias lt='eza --tree --color=always --icons'
alias tree='eza --tree --color=always --icons --level=3'
alias ltree='eza -Tla --color=always --icons --git --level=2 --git-repos'
alias bigtree='eza -Tla --total-size --sort=size --color=always --icons --level=2'
```

ncdu：交互式磁盘空间分析，增强版 `du`
- 📊 以交互式界面展示目录和文件占用空间
- 🔍 快速定位大文件/目录
- 🗑️ 支持直接删除文件/目录

```bash
# macOS
brew install ncdu
# Linux
sudo apt install ncdu

cd /path/to/dir
ncdu  # 使用方向键浏览，按 d 删除选中项
```

duf：美观的 `df`

- 🌈 彩色表格显示所有挂载点
- 📏 支持按列排序
- 🖥 自动适应终端宽度和主题

```bash
# macOS
brew install duf
duf
```


[btop](https://github.com/aristocratos/btop)：增强版 `top`

```bash
brew install btop
```

[tldr](https://github.com/tldr-pages/tldr)：省去冗长的 man 文档

```bash
brew install tldr
# example
tldr tar
```

## SSH Key

客户端生成 SSH Key

```bash
# Windows PowerShell
ssh-keygen -t ed25519 -C "razer-wsl" -f $env:USERPROFILE\.ssh\id_ed25519_razer_wsl

# Ubuntu & MacOS
sh-keygen -t ed25519 -C "razer-wsl" -f ~/.ssh/id_ed25519_razer_wsl

cat ~/.ssh/id_ed25519_razer_wsl.pub
```

## Python

装个 uv 就完事儿了 

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

[**Python 使用 UV 进行环境管理**](https://www.notion.so/Python-UV-21475983911e81f7805dfcc8fac22df6?pvs=21) 

如果想随时启动一个 python 交互式视窗（REPL）可以 `uv run python`

## Samba

树莓派配置 PLEX 服务器 & SMB

安装 plex server，官网下载 Arm64 安装包
```bash
sudo dpkg -i plexmediaserver_1.41.7.9823-59f304c16_arm64.deb
```

安装配置 SMB

```bash
sudo apt install samba samba-common-bin

sudo mkdir -p /media/plex
sudo chown isumi:isumi /media/plex
sudo vim /etc/samba/smb.conf
```

SMB 配置文件末尾追加，可以额外设置共享 home

```
[homes]
   comment = Home Directories
   browseable = no

# By default, the home directories are exported read-only. Change the
# next parameter to 'no' if you want to be able to write to them.
   read only = no

# File creation mask is set to 0700 for security reasons. If you want to
# create files with group=rw permissions, set next parameter to 0775.
   create mask = 0775

# Directory creation mask is set to 0700 for security reasons. If you want to
# create dirs. with group=rw permissions, set next parameter to 0775.
   directory mask = 0775

# By default, \\server\username shares can be connected to by anyone
# with access to the samba server.
# The following parameter makes sure that only "username" can connect
# to \\server\username
# This might need tweaking when using external authentication schemes
   valid users = %S

[plex]
    comment = Plex Media
    path = /media/plex
    browseable = yes
    writeable = yes
    only guest = no
    create mask = 0777
    directory mask = 0777
    public = no
    valid users = isumi
```

建立 SMB 账号，启动 SMB 服务

```bash
# isumi 是 Linux 已有的用户名
sudo smbpasswd -a isumi
sudo systemctl restart smbd
sudo systemctl enable smbd
```

访问 `\\IP\plex` 即可